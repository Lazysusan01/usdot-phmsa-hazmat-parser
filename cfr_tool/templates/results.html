<!doctype html>

<head>
    <style>
        .packaging-container {
            display: flex;
        }
        
        .column {
            flex: 50%;
            padding: 10px;
        }
        
        #placeholder {
            position: relative;
        }
        
        #packaging-standards {
            position: sticky;
            top: 0;
            border: 3px solid #73AD21;
            padding: 10px
        }
    </style>
</head>

<body>

    <title>Hazmat Lookup Tool</title>

    <div class="packaging-container">
        <div id="packaging-requirements" class="column">
            <h1>{{ results['bulk'] }} Packaging Instructions for UNNA Number {{ results['UNID'] }}</h1>
            <h2>{{ results['hazmat_name'] }}</h2>
            <h2>173.{{ results['part_num'] }}</h2>
            <h3>Click on highlighted packaging codes to view its packaging standards to the right.</h3>
            {%for i in range(0, len)%}
            <p>{{results['text'][i]|safe}}</p>
            {%endfor%}
        </div>
        <div id="placeholder" class="column">
            <div id="packaging-standards">
                <h1>Packaging Standards</h1>
            </div>
        </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        window.jQuery || document.write("<script src='{{url_for('static', filename='jquery-3.5.1.js') }}'>\x3C/script>")
    </script>
    <script type=text/javascript>
        $(function() {
            // $('mark').bind('click', function(e){
            //     $.getJSON($SCRIPT_ROOT + '/code_lookup', e.target.firstChild.data, function)
            // })
            var marks = document.getElementsByTagName('mark');
            for (i = 0; i < marks.length; i++) {
                marks[i].addEventListener('click', function(ev) {
                    ev.preventDefault();
                    var json_output = $.getJSON("/code_lookup", {
                        code: ev.target.firstChild.data
                    }, function(data) {
                        console.log("code looked up")
                        var standards = document.getElementById("packaging-standards")
                        standards.innerHTML = "<h2>178." + data.subpart + "</h2>" + data.html

                    })
                })
            }
        });
    </script>
</body>